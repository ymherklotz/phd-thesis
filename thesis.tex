\PassOptionsToPackage{hyphens}{url}
\documentclass[
  fontsize=12pt,
%  headings=openany,
%  headings=twolinechapter,
  twoside=semi,
  bibliography=totoc,
%  draft=true,
%  headsepline=true,
  DIV=11,
  ]{scrbook}

\setkomafont{publishers}{\large}
\setkomafont{date}{}
\setkomafont{subject}{\large\scshape}

\usepackage[svgnames]{xcolor}

\colorlet{maincolour}{DarkSlateBlue}

\renewcommand\chapterlinesformat[3]{%
  \leavevmode{\raggedleft #3\par}%
  \marginpar{\fontsize{96}{115}\selectfont\textcolor{maincolour}{#2}}
}

\renewcommand{\figureformat}{\textbf{\figurename~\thefigure\autodot}}
\renewcommand{\tableformat}{\textbf{\tablename~\thetable\autodot}}
\renewcommand{\captionformat}{\textbf{:}\ }

%\usepackage[autooneside=false]{scrlayer-scrpage}
%\pagestyle{scrheadings}
%\automark[section]{chapter}

\usepackage[autostyle]{csquotes}
\usepackage{polyglossia}
\setdefaultlanguage[variant=british]{english}

\usepackage[en-GB,calc]{datetime2}

\DTMnewdatestyle{ymhgshortdate}{%
  \renewcommand{\DTMdisplaydate}[4]{\DTMmonthname{##2} ##1}%
  \renewcommand{\DTMDisplaydate}{\DTMdisplaydate}%
}

\begin{hyphenrules}[variant=british]{english}
  \hyphenation{Comp-Cert Veri-cert Comp-Cert-GSA Comp-Cert-SSA Comp-Cert-O Bo-row-ski poly-he-dral}
\end{hyphenrules}

\usepackage[
  backend=biber,
  backref=true,
  minbibnames=3,
  maxbibnames=9,
  maxcitenames=2,
  mincitenames=1,
  uniquename=false,
  uniquelist=false,
  labeldateparts=true,
  datamodel=acmdatamodel,
  style=acmauthoryear,
]{biblatex}

\addbibresource{thesis-refs.bib}
\addbibresource{ymh-refs.bib}

% For ACM author year citations
\newcommand{\bibliofont}{\normalfont\normalsize}
\renewcommand*{\bibfont}{\normalfont\normalsize}
\setlength\bibitemsep{\baselineskip}

%\usepackage{lineno}
%\linenumbers
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{textcomp}

\usepackage{verbatim}

\usepackage{accents}
\usepackage[inline]{enumitem}
\usepackage{soul}
\usepackage{subcaption}

\usepackage{pgfplotstable}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}

\usepackage{tikz-timing}
\usepackage{tikz}
\usepackage{circuitikz}
\usetikzlibrary{arrows,arrows.meta,shapes,automata,backgrounds,petri,%
                decorations.pathreplacing,calligraphy,patterns,%
                patterns.meta,pgfplots.groupplots,positioning,shapes.geometric,%
                fit,tikzmark,intersections}

\usepackage{mathpartir}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{tikzpagenodes}
\usepackage{microtype}

\usepackage{setspace}
\onehalfspacing

\usepackage{minted}
\setminted{fontsize=\small}
\usemintedstyle{manni}

\usepackage[colorlinks=true,pdfa]{hyperref}
\hypersetup{allcolors=maincolour}

\usepackage[acronym,index,symbols,xindy,nomain]{glossaries-extra}
\usepackage{glossary-bookindex}
\setabbreviationstyle[acronym]{long-short}
\makeatletter
\newcommand*{\glsplainhyperlink}[2]{%
    \begingroup%
      \hypersetup{hidelinks}%
      \hyperlink{#1}{#2}%
    \endgroup%
}
\let\@glslink\glsplainhyperlink
\makeatother
\makeglossaries

\usepackage[noabbrev]{cleveref}

\usepackage{ymh-macros}

%% https://tex.stackexchange.com/a/535849
\usepackage{hyperxmp}
%\usepackage{embedfile}

%\usepackage{uni-titlepage}
%\TitlePageStyle{UKoLa}

\subject{Imperial College London\\Department of Electrical and Electronic Engineering}
\title{Formal Verification \\ of High-Level Synthesis}
\author{Yann Herklotz Grave}
\date{\DTMsetdatestyle{ymhgshortdate}\today}

\publishers{Supervised by John Wickerson}

\makeatletter
\newcommand\@titlefooter{Submitted in part fulfilment of the requirements for
the degree of Doctor of Philosophy in Electrical and Electronic Engineering of
Imperial College London and the Diploma of Imperial College London.}
\makeatother

%\university{Imperial College London}

\hypersetup{%
    pdflang=la,
    pdfapart=3, %set to 1 for PDF/A-1
    pdfaconformance=B
}

%\embedfile[afrelationship={/Source},ucfilespec={\jobname.tex},mimetype={application/x-tex}]{\jobname.tex}

%Create an OutputIntent in order to correctly specify colours
\immediate\pdfobj stream attr{/N 3} file{sRGBIEC1966-2.1.icm}
\pdfcatalog{%
  /OutputIntents [
    <<
      /Type /OutputIntent
      /S /GTS_PDFA1
      /DestOutputProfile \the\pdflastobj\space 0 R
      /OutputConditionIdentifier (sRGB)
      /Info (sRGB)
    >>
  ]
}

% https://tex.stackexchange.com/a/474336
\pdfvariable omitcidset=1

\newacronym{SSA}{SSA}{static single assignment} \newacronym{GSA}{GSA}{gated-SSA}
\newacronym{HDL}{HDL}{hardware description language}
\newacronym{HLS}{HLS}{high-level synthesis}
\newacronym{FPGA}{FPGA}{field-programmable gate array}
\newacronym{DFG}{DFG}{data-flow graph} \newacronym{CFG}{CFG}{control-flow graph}
\newacronym{CDFG}{CDFG}{control- and data-flow graph}
\newacronym{SDC}{SDC}{system of difference constraints}
\newacronym{CNF}{CNF}{conjunctive normal form}
\newacronym{SAT}{SAT}{satisfiability} \newacronym{SMT}{SMT}{satisfiability
  modulo theories} \newacronym{DSP}{DSP}{digital signal processor}
\newacronym{ITP}{ITP}{interactive theorem prover}
\newacronym{FSMD}{FSMD}{finite-state machine with data path}
\newacronym{II}{II}{initiation interval} \newacronym{ASAP}{ASAP}{as soon as
  possible} \newacronym{ALAP}{ALAP}{as late as possible}
\newacronym{LUT}{LUT}{look-up table} \newacronym{MRT}{MRT}{modulo reservation
  table} \newacronym{LSQ}{LSQ}{load-store queue} \newacronym{BRAM}{BRAM}{block
  random-access memory} \newacronym{ASIC}{ASIC}{application-specific integrated
  circuit} \newacronym{IR}{IR}{intermediate representation}
\newacronym{DSL}{DSL}{domain-specific language} \newacronym{CPU}{CPU}{central
  processing unit} \newacronym{GPU}{GPU}{graphics processing unit}
\newacronym{IPcore}{IP core}{intellectual property core}
\newacronym{AST}{AST}{abstract syntax tree} \newacronym{ILP}{ILP}{integer linear
  programming} \newacronym{LP}{LP}{linear programming}
\newacronym{VLIW}{VLIW}{very large instruction word}
\newacronym{DRAM}{DRAM}{dynamic random-access memory}
\newglossaryentry{FSM}{type=\acronymtype,
    name={FSM},%
    description={finite-state machine}, first={FSM}}
\newcommand\newlanguageentry[3]{\newglossaryentry{#1}{type=\acronymtype,
    name={\textsc{#2}},%
    description={#3}, first={#3 (\textsc{#2})}}}
\newcommand\newlanguageentrynofirst[3]{\newglossaryentry{#1}{type=\acronymtype,
    name={\textsc{#2}},%
    description={#3}, first={\textsc{#2}}}} \newlanguageentry{RTL}{Rtl}{register
  transfer language}
\newlanguageentry{BTL}{Btl}{block transfer language}
\newlanguageentrynofirst{LTL}{Ltl}{linear transfer language}
\newlanguageentrynofirst{Clight}{Clight}{CompCert intermediate language}
\newlanguageentrynofirst{CSminor}{C\#minor}{CompCert intermediate language}
\newlanguageentrynofirst{Cminor}{Cminor}{CompCert intermediate language}
\newlanguageentrynofirst{Mach}{Mach}{CompCert intermediate language}
\newlanguageentrynofirst{Linear}{Linear}{CompCert intermediate language}
\newlanguageentrynofirst{CminorSel}{CminorSel}{CompCert intermediate language}
\newlanguageentrynofirst{Cstrategy}{Cstrategy}{CompCert intermediate language}
\newlanguageentrynofirst{Asm}{Asm}{CompCert assembly language}
\newlanguageentrynofirst{AsmBlock}{AsmBlock}{CompCert KVX assembly block
  language}

\newignoredglossary{ignoredglossary}

\newterm[type=ignoredglossary,name={\enquote{plus} forward simulation},sort=plusforwardsimulation]{plus-forward-simulation}
\newterm[type=ignoredglossary,name={\enquote{star} forward simulation},sort=starforwardsimulation]{star-forward-simulation}
\newterm[type=ignoredglossary]{CompCert}
\newterm[type=ignoredglossary]{translation validation}
\newterm[type=ignoredglossary]{data flow}
\newterm[type=ignoredglossary]{control flow}
\newterm[type=ignoredglossary]{data path}
\newterm[type=ignoredglossary]{control logic}
\newterm[type=ignoredglossary]{basic block}
\newterm[type=ignoredglossary]{superblock}
\newterm[type=ignoredglossary]{hyperblock}
\newterm[type=ignoredglossary]{predicated instruction}
\newterm[type=ignoredglossary]{scheduling}
\newterm[type=ignoredglossary]{if-conversion}
\newterm[type=ignoredglossary,see={[see also]scheduling}]{list scheduling}
\newterm[type=ignoredglossary,see={[see also]{hyperblock,scheduling}}]{hyperblock scheduling}
\newterm[type=ignoredglossary,see={[see also]{superblock,scheduling}}]{superblock scheduling}
\newterm[type=ignoredglossary]{static scheduling}
\newterm[type=ignoredglossary]{dynamic scheduling}
\newterm[type=ignoredglossary]{operation chaining}

\glsxtrnewsymbol[type=ignoredglossary,description={variable defining the time step of an
  operation}]{scheduling variable}{\ensuremath{\mathrm{sv}}}

%\newterm

% \includeonly{%
% % titlepage,
% % copyright-assignment,
% % declaration,
% % abstract,
% % acknowledgements,
% % lists,
% % chapters/1-introduction,
% % chapters/2-background,
% % chapters/3-introduction-to-vericert,
% % chapters/4-trusted-computing-base,
% chapters/5-hyperblock-scheduling,
% % chapters/6-hardware-generation,
% % chapters/7-evaluation,
% % chapters/8-conclusion,
% % bibliography,
% }

\setcapindent{1em}

\begin{document}

\include{titlepage}

\include{copyright-assignment}

\include{declaration}

\include{abstract}

\include{acknowledgements}

\include{lists}

\glsresetall

\include{chapters/1-introduction}

\include{chapters/2-background}

\include{chapters/3-introduction-to-vericert}

\include{chapters/4-trusted-computing-base}

\include{chapters/5-hyperblock-scheduling}

\include{chapters/6-hardware-generation}

\include{chapters/7-evaluation}

\include{chapters/8-conclusion}

\include{bibliography}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% TeX-engine: luatex
%%% End:
