\PassOptionsToPackage{hyphens}{url}
\documentclass[
  fontsize=12pt,
%  headings=openany,
%  headings=twolinechapter,
  twoside=semi,
  bibliography=totoc,
%  draft=true,
%  headsepline=true,
  DIV=11,
  ]{scrbook}

\setkomafont{publishers}{\large\itshape}

\usepackage[svgnames]{xcolor}
\usepackage{afterpage}
\usepackage{pdflscape}

\colorlet{maincolour}{DarkSlateBlue}

\renewcommand\chapterlinesformat[3]{%
  \leavevmode\marginpar{\fontsize{96}{115}\selectfont\textcolor{maincolour}{#2}}%
  {\raggedleft #3\par}%
}

\renewcommand{\figureformat}{\textbf{\figurename~\thefigure\autodot}}
\renewcommand{\tableformat}{\textbf{\tablename~\thetable\autodot}}
\renewcommand{\captionformat}{\textbf{:}\ }

%\usepackage[autooneside=false]{scrlayer-scrpage}
%\pagestyle{scrheadings}
%\automark[section]{chapter}

\usepackage[autostyle]{csquotes}
\usepackage{polyglossia}
\setdefaultlanguage[variant=british]{english}

\begin{hyphenrules}[variant=british]{english}
  \hyphenation{Comp-Cert Veri-cert Comp-Cert-GSA Comp-Cert-SSA CompCertO}
\end{hyphenrules}

\usepackage[
  backend=biber,
  backref=true,
  minbibnames=3,
  maxbibnames=9,
  maxcitenames=2,
  mincitenames=1,
  uniquename=minfull,
  uniquelist=minyear,
  labeldateparts=true,
  datamodel=acmdatamodel,
  style=acmauthoryear,
]{biblatex}

\addbibresource{thesis-refs.bib}
\addbibresource{ymh-refs.bib}

% For ACM author year citations
\newcommand{\bibliofont}{\normalfont\normalsize}
\renewcommand*{\bibfont}{\normalfont\normalsize}
%\setlength\bibitemsep{\baselineskip}

%\usepackage{lineno}
%\linenumbers
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{textcomp}

\usepackage{verbatim}

\usepackage{accents}
\usepackage[inline]{enumitem}
\usepackage{soul}
\usepackage{subcaption}

\usepackage{pgfplotstable}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}

\usepackage{tikz-timing}
\usepackage{tikz}
\usetikzlibrary{arrows,arrows.meta,shapes,snakes,automata,backgrounds,petri,%
                decorations.pathreplacing,calligraphy,patterns,%
                patterns.meta,pgfplots.groupplots,positioning,shapes.geometric,%
                fit,tikzmark}

\usepackage{mathpartir}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{tikzpagenodes}
\usepackage{microtype}

\usepackage{setspace}
\onehalfspacing

\usepackage{minted}
\setminted{fontsize=\small}
\usemintedstyle{manni}

\usepackage[colorlinks=true,pdfa]{hyperref}
\hypersetup{allcolors=maincolour}

\usepackage[acronym,index,symbols,xindy,nomain]{glossaries-extra}
\usepackage{glossary-bookindex}
\setabbreviationstyle[acronym]{long-short}
\makeatletter
\newcommand*{\glsplainhyperlink}[2]{%
    \begingroup%
      \hypersetup{hidelinks}%
      \hyperlink{#1}{#2}%
    \endgroup%
}
\let\@glslink\glsplainhyperlink
\makeatother
\makeglossaries

\usepackage[noabbrev]{cleveref}

\usepackage{ymh-macros}

%% https://tex.stackexchange.com/a/535849
\usepackage{hyperxmp}
%\usepackage{embedfile}

%\usepackage{uni-titlepage}
%\TitlePageStyle{UKoLa}

\subject{PhD Thesis}
\title{Formal Verification \\ of High-Level Synthesis}
\author{Yann Herklotz Grave}

\publishers{Supervised by \\ Dr John Wickerson}

\makeatletter
\newcommand\@titlefooter{Submitted in part fulfilment of the requirements for
the degree of Doctor of Philosophy in Electrical and Electronic Engineering of
Imperial College London.}
\makeatother

%\university{Imperial College London}

\hypersetup{%
    pdflang=la,
    pdfapart=3, %set to 1 for PDF/A-1
    pdfaconformance=B
}

%\embedfile[afrelationship={/Source},ucfilespec={\jobname.tex},mimetype={application/x-tex}]{\jobname.tex}

%Create an OutputIntent in order to correctly specify colours
\immediate\pdfobj stream attr{/N 3} file{sRGBIEC1966-2.1.icm}
\pdfcatalog{%
  /OutputIntents [
    <<
      /Type /OutputIntent
      /S /GTS_PDFA1
      /DestOutputProfile \the\pdflastobj\space 0 R
      /OutputConditionIdentifier (sRGB)
      /Info (sRGB)
    >>
  ]
}

% https://tex.stackexchange.com/a/474336
\pdfvariable omitcidset=1

\newacronym{SSA}{SSA}{static single assignment}
\newacronym{GSA}{GSA}{gated-SSA}
\newacronym{HDL}{HDL}{hardware description language}
\newacronym{HLS}{HLS}{high-level synthesis}
\newacronym{FPGA}{FPGA}{field-programmable gate array}
\newacronym{DFG}{DFG}{data-flow graph}
\newacronym{CFG}{CFG}{control-flow graph}
\newacronym{CDFG}{CDFG}{control- and data-flow graph}
\newacronym{SDC}{SDC}{system of difference constraints}
\newacronym{CNF}{CNF}{conjunctive normal form}
\newacronym{SAT}{SAT}{satisfiability}
\newacronym{SMT}{SMT}{satisfiability modulo theories}
\newacronym{DSP}{DSP}{digital signal processor}
\newacronym{ITP}{ITP}{interactive theorem prover}
\newacronym{FSMD}{FSMD}{finite-state machine with data path}
\newacronym{II}{II}{initiation interval}
\newacronym{ASAP}{ASAP}{as soon as possible}
\newacronym{ALAP}{ALAP}{as late as possible}
\newacronym{LUT}{LUT}{look-up table}
\newacronym{MRT}{MRT}{modulo reservation table}
\newacronym{LSQ}{LSQ}{load-store queue}
\newacronym{BRAM}{BRAM}{block random-access memory}
\newacronym{ASIC}{ASIC}{application-specific integrated circuit}
\newacronym{IR}{IR}{intermediate representation}
\newacronym{DSL}{DSL}{domain-specific language}
\newacronym{CPU}{CPU}{central processing unit}
\newacronym{GPU}{GPU}{graphics processing unit}
\newacronym{IPcore}{IP core}{intellectual property core}
\newacronym{AST}{AST}{abstract syntax tree}
\newacronym{ILP}{ILP}{integer linear programming}
\newacronym{LP}{LP}{linear programming}
\newacronym{VLIW}{VLIW}{very large instruction word}
\newacronym{DRAM}{DRAM}{dynamic random-access memory}
\newacronym{FSM}{FSM}{finite-state machine}
\newcommand\newlanguageentry[3]{\newglossaryentry{#1}{type=\acronymtype, name={\textsc{#2}},%
  description={#3}, first={#3 (\textsc{#2})}}}
\newlanguageentry{RTL}{Rtl}{register transfer language}
\newlanguageentry{LTL}{Ltl}{linear transfer language}
\newlanguageentry{BTL}{Btl}{block transfer language}

\newterm[name={\enquote{plus} forward simulation},sort=plusforwardsimulation]{plus-forward-simulation}
\newterm[name={\enquote{star} forward simulation},sort=starforwardsimulation]{star-forward-simulation}
\newterm{CompCert}
\newterm{translation validation}
\newterm{data flow}
\newterm{control flow}
\newterm{data path}
\newterm{control logic}
\newterm{basic block}
\newterm{superblock}
\newterm{hyperblock}
\newterm{predicated instruction}
\newterm{scheduling}
\newterm[see={[see also]scheduling}]{list scheduling}
\newterm[see={[see also]{hyperblock,scheduling}}]{hyperblock scheduling}
\newterm[see={[see also]{superblock,scheduling}}]{superblock scheduling}
\newterm{static scheduling}
\newterm{dynamic scheduling}
\newterm{operation chaining}

\glsxtrnewsymbol[description={variable defining the time step of an
  operation}]{scheduling variable}{\ensuremath{\mathrm{sv}}}

%\newterm

\includeonly{%
 titlepage,
 copyright-assignment,
 declaration,
 abstract,
 acknowledgements,
 lists,
 chapters/1-introduction,
 chapters/2-background,
 chapters/3-introduction-to-vericert,
 chapters/4-trusted-computing-base,
 chapters/5-hyperblock-scheduling,
 chapters/6-hardware-generation,
 chapters/7-evaluation,
 chapters/8-conclusion,
 bibliography,
}

\setcapindent{1em}

\begin{document}

\include{titlepage}

\include{copyright-assignment}

\include{declaration}

\include{abstract}

\include{acknowledgements}

\include{lists}

\glsresetall

\include{chapters/1-introduction}

\include{chapters/2-background}

\include{chapters/3-introduction-to-vericert}

\include{chapters/4-trusted-computing-base}

\include{chapters/5-hyperblock-scheduling}

\include{chapters/6-hardware-generation}

\include{chapters/7-evaluation}

\include{chapters/8-conclusion}

\include{bibliography}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% TeX-engine: luatex
%%% End:
